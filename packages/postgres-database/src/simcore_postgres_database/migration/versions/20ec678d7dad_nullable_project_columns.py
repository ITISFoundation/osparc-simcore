"""Nullable project columns

Revision ID: 20ec678d7dad
Revises: 99db5efc4548
Create Date: 2019-07-04 08:44:35.901118+00:00

"""

import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision = "20ec678d7dad"
down_revision = "99db5efc4548"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column(
        "projects", "description", existing_type=sa.VARCHAR(), nullable=True
    )
    op.alter_column("projects", "thumbnail", existing_type=sa.VARCHAR(), nullable=True)
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute(sa.DDL("UPDATE projects SET thumbnail = '' WHERE thumbnail IS NULL"))
    op.alter_column("projects", "thumbnail", existing_type=sa.VARCHAR(), nullable=False)

    op.execute(sa.DDL("UPDATE projects SET description = '' WHERE description IS NULL"))
    op.alter_column(
        "projects", "description", existing_type=sa.VARCHAR(), nullable=False
    )
    # ### end Alembic commands ###
