{%- set default_strong_color = "rgb(131, 0, 191)" -%}
{%- set default_logo = "https://raw.githubusercontent.com/ITISFoundation/osparc-simcore/refs/heads/master/services/static-webserver/client/source/resource/osparc/osparc-black.svg" -%}
{%- set default_homepage = "https://osparc.io/" -%}

{# Styles #}
{%- set body_style = "font-family: 'Open Sans', sans-serif; font-size: 16px; line-height: 1.5; color: #353638; margin: 0; padding: 0; background-color: #ffffff;" -%}
{%- set email_container_style = "max-width: 600px; margin: 20px auto; background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);" -%}
{%- set header_style = "display: flex; align-items: center; border-bottom: 2px solid #ddd; padding-bottom: 10px; margin-bottom: 20px;" -%}
{%- set content_style = "color: #353638; font-size: 16px; line-height: 1.5;" -%}
{%- set footer_style = "margin-top: 20px; padding-top: 15px; border-top: 2px solid #ddd; font-size: 14px; text-align: center; color: #353638;" -%}
{%- set footer_social_list_style = "display: flex; justify-content: center; gap: 12px; margin: 0 0 12px; padding: 0; list-style: none;" -%}
{%- set footer_social_link_style = "width: 40px; height: 40px; border-radius: 50%; background-color: #f1f3f5; color: #353638; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; font-weight: 600;" -%}
{%- set footer_social_icon_wrapper_style = "display: inline-flex; align-items: center; justify-content: center; width: 100%; height: 100%;" -%}
{%- set footer_social_icon_svgs = {
  "linkedin": '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect width="24" height="24" rx="4" fill="#0A66C2"/><path fill="#ffffff" d="M5.34 8.5h3V19h-3zM6.84 5a1.75 1.75 0 1 1 0 3.5 1.75 1.75 0 0 1 0-3.5zM10.66 8.5h2.86v1.44h.04c.4-.76 1.38-1.56 2.84-1.56 3.04 0 3.6 2 3.6 4.6V19h-3v-4.08c0-.97-.02-2.22-1.35-2.22-1.35 0-1.55 1.06-1.55 2.15V19h-3z"/></svg>',
  "youtube": '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect width="24" height="24" rx="4" fill="#FF0000"/><path fill="#ffffff" d="M10 15.5v-7l6 3.5-6 3.5z"/></svg>',
  "github": '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect width="24" height="24" rx="4" fill="#24292F"/><path fill="#ffffff" d="M12 5a7 7 0 0 0-2.21 13.64c.35.06.48-.14.48-.33 0-.16-.01-.69-.01-1.25-1.75.32-2.21-.43-2.35-.83-.08-.2-.42-.83-.72-1-.25-.13-.6-.45-.01-.46.55-.01.94.51 1.07.72.63 1.07 1.64.77 2.04.58.06-.46.25-.77.45-.95-1.55-.18-3.18-.78-3.18-3.48 0-.77.28-1.39.73-1.88-.07-.18-.32-.92.07-1.92 0 0 .59-.19 1.93.72a6.64 6.64 0 0 1 3.52 0c1.34-.91 1.93-.72 1.93-.72.39 1 .14 1.74.07 1.92.45.49.73 1.11.73 1.88 0 2.71-1.64 3.3-3.2 3.48.26.23.48.68.48 1.37 0 .99-.01 1.78-.01 2.02 0 .18.12.39.48.33A7 7 0 0 0 12 5z"/></svg>'
} -%}
{%- set footer_share_list_style = "display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin: 0 0 18px; padding: 0; list-style: none;" -%}
{%- set footer_share_link_style = "min-width: 120px; border-radius: 4px; background-color: #e5e7eb; color: #353638; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 6px; font-weight: 600; padding: 8px 16px;" -%}
{%- set footer_share_icon_wrapper_style = "display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px;" -%}
{%- set footer_share_badge_style = "width: 22px; height: 22px; border-radius: 3px; background-color: #353638; color: #ffffff; font-size: 12px; display: inline-flex; align-items: center; justify-content: center;" -%}
{%- set footer_share_icon_svgs = {
  "facebook": '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect width="24" height="24" rx="4" fill="#1877F2"/><path fill="#ffffff" d="M16 8h-1.8c-.28 0-.6.37-.6.76V10H16l-.3 2h-1.8v6h-2.2v-6H10v-2h1.7V8.5C11.7 7.1 12.6 6 14.6 6H16z"/></svg>',
  "twitter": '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect width="24" height="24" rx="4" fill="#1DA1F2"/><path fill="#ffffff" d="M18.9 7.5c-.5.2-1 .3-1.5.4a2.64 2.64 0 0 0 1.1-1.4 5.1 5.1 0 0 1-1.7.7 2.55 2.55 0 0 0-4.4 2.3A7.25 7.25 0 0 1 7.2 7c-.3.6-.3 1.4 0 2a2.55 2.55 0 0 0 1.1 1.1 2.5 2.5 0 0 1-1.2-.3c0 1.2.8 2.3 2 2.5a2.6 2.6 0 0 1-1.1 0 2.56 2.56 0 0 0 2.4 1.8A5.1 5.1 0 0 1 6 16a7.2 7.2 0 0 0 11.2-6.4c.5-.3 1-.8 1.6-1.2z"/></svg>',
  "linkedin": footer_social_icon_svgs["linkedin"]
} -%}
{%- set footer_company_text_style = "margin: 4px 0; color: #6c6d70;" -%}
{%- set footer_links_separator_style = "margin: 0 8px; color: #c4c4c4;" -%}
{%- set link_style = "color: #007bff; text-decoration: none;" -%}
{%- set strong_button_style = "cursor: pointer; background-color: " ~ (product.ui.strong_color | default(default_strong_color)) ~ "; color: white; padding: 10px; border: none; border-radius: 4px; overflow: hidden; white-space: nowrap; user-select: none; touch-action: none; outline: none;" -%}
{%- set strong_button_link_style = "font-size: 16px; color: white; text-decoration: none; display: block; width: 100%; height: 100%; text-align: center;" -%}
{%- set paragraph_style_block -%}
  .content p {
    margin-top: 20px !important;
    margin-bottom: 0 !important;
  }
  .content p:first-child {
    margin-top: 0 !important;
  }
{%- endset -%}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}{% endblock %}</title>
</head>
<body style="{{ body_style }}">
  <div class="email-container" style="{{ email_container_style }}">
    <div class="header" style="{{ header_style }}">
      <a href="{{ product.homepage_url | default(default_homepage) }}" target="_blank" rel="noopener noreferrer">
        <img src="{{ product.ui.logo_url | default(default_logo) }}" alt="Logo" style="height: 40px;">
      </a>
    </div>

    <div class="content" style="{{ content_style }}">
      <style>
      {{ paragraph_style_block }}
      </style>
      {% block content %}
      {% endblock %}
    </div>

    <div class="footer" style="{{ footer_style }}">
      {% if product.footer_social_links %}
      <ul style="{{ footer_social_list_style }}">
        {% for social_name, social_url in product.footer_social_links %}
        {% set social_key = social_name | lower %}
        {% set social_icon = footer_social_icon_svgs.get(social_key) %}
        <li style="list-style: none;">
          <a href="{{ social_url }}" target="_blank" rel="noopener noreferrer" style="{{ footer_social_link_style }}" title="{{ social_name }}">
            <span style="{{ footer_social_icon_wrapper_style }}">
              {% if social_icon %}
                {{ social_icon | safe }}
              {% else %}
                {{ social_name[:2] | upper }}
              {% endif %}
            </span>
          </a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if product.footer_share_links %}
      <ul style="{{ footer_share_list_style }}">
        {% for share_name, share_label, share_url in product.footer_share_links %}
        {% set share_key = share_name | lower %}
        {% set share_icon = footer_share_icon_svgs.get(share_key) %}
        <li style="list-style: none;">
          <a href="{{ share_url }}" target="_blank" rel="noopener noreferrer" style="{{ footer_share_link_style }}" title="{{ share_name }}">
            <span style="{{ footer_share_icon_wrapper_style }}">
              {% if share_icon %}
                {{ share_icon | safe }}
              {% else %}
                <span style="{{ footer_share_badge_style }}">{{ share_name[:1] | upper }}</span>
              {% endif %}
            </span>
            <span>{{ share_label }}</span>
          </a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      <p style="{{ footer_company_text_style }}">{{ product.company_name }}</p>
      <p style="{{ footer_company_text_style }}">{{ product.company_address }}</p>

      {% if product.company_links %}
      <p style="{{ footer_company_text_style }}">
        {% for link_name, link_url in product.company_links %}
          <a href="{{ link_url }}" target="_blank" rel="noopener noreferrer" style="{{ link_style }}">{{ link_name }}</a>{% if not loop.last %}<span style="{{ footer_links_separator_style }}">|</span>{% endif %}
        {% endfor %}
      </p>
      {% endif %}
    </div>
  </div>
</body>
</html>
