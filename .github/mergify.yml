pull_request_rules:
  - name: automatic update for PR ready to be merged
    conditions:
      - -draft
      - label=ðŸ¤–-automerge
    actions:
      update:
  - name: Automatic merge
    description: Conditions required for automatic merging of a PR
    conditions:
      - label = ðŸ¤–-automerge
      - label != ðŸ¤–-do-not-merge
      - check-success=unit-tests
      - check-success=integration-tests
      - check-success=system-tests
      - "#approved-reviews-by>=2"
      - "#changes-requested-reviews-by=0"
      - "#review-threads-unresolved=0"
      - base=master
      - -draft
      - -conflict
    actions:
      merge:
  - name: retry CI on failure
    conditions:
      - base=master
      - or:
          - check-failure=unit-tests
          - check-failure=integration-tests
          - check-failure=system-tests
    actions:
      github_actions:
        workflow:
          dispatch:
            - workflow: .github/workflows/ci-testing-deploy.yml
