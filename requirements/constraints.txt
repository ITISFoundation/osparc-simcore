# Global constraints applying to all services and packages in this repo
#
#   - vulnerabilities
#   - breaking changes
#   - known bugs/malfunction
#   - coordination (e.g. enforce same library in the entire repository)

#
# Vulnerabilities
#
aiohttp>=3.7.4                                # https://github.com/advisories/GHSA-v6wp-4m6f-gcjg
cryptography>=3.3.2                           # https://github.com/advisories/GHSA-rhm9-p9w5-fwm7  Feb.2021
jinja2>=2.11.3                                # https://github.com/advisories/GHSA-g3rq-g295-4j3m
pydantic>=1.8.2                               # https://github.com/advisories/GHSA-5jqp-qgf6-3pvh
pyyaml>=5.4                                   # https://github.com/advisories/GHSA-8q59-q68h-6hv4
sqlalchemy[postgresql_psycopg2binary]>=1.3.3  # https://nvd.nist.gov/vuln/detail/CVE-2019-7164
sqlalchemy>=1.3.3                             # https://nvd.nist.gov/vuln/detail/CVE-2019-7164
urllib3>=1.26.5                               # https://github.com/advisories/GHSA-q2q7-5pp4-w6pg


#
# Breaking changes
#

# TODO: https://aioredis.readthedocs.io/en/latest/migration/)
aioredis<2.0.0
# with new released version 1.0.0 (https://github.com/aio-libs/aiozipkin/releases).
# TODO: includes async features https://docs.sqlalchemy.org/en/14/changelog/migration_20.html
sqlalchemy<2.0


#
# Bugs
#

# FIXME: minio 7.1.0 does not delete objects. SEE
minio==7.0.4

#
# Compatibility/coordination
#


# Keeps all docker compose to the same version. TODO: remove when all synced
docker-compose==1.29.1


# Could not find a version that matches typing-extensions==3.10.0.2,>=3.10,>=4.0 (from -c requirements/_base.txt (line 392))
# Tried: 3.6.2, 3.6.2, 3.6.2.1, 3.6.2.1, 3.6.5, 3.6.5, 3.6.6, 3.6.6, 3.7.2, 3.7.2, 3.7.4, 3.7.4, 3.7.4.1, 3.7.4.1, 3.7.4.2, 3.7.4.2, 3.7.4.3, 3.7.4.3, 3.10.0.0, 3.10.0.0, 3.10.0.1, 3.10.0.1, 3.10.0.2, 3.10.0.2, 4.0.0, 4.0.0, 4.0.1, 4.0.1, 4.1.0, 4.1.0, 4.1.1, 4.1.1
# There are incompatible versions in the resolved dependencies:
#   typing-extensions==3.10.0.2 (from -c requirements/_base.txt (line 392))
#   typing_extensions>=4.0 (from aioitertools==0.10.0->aiobotocore[boto3]==2.1.2->aioboto3==9.4.0->-r requirements/_test.in (line 29))
#   typing-extensions>=3.10 (from astroid==2.9.3->pylint==2.12.2->-r requirements/_test.in (line 46))
#   typing-extensions>=3.10.0 (from pylint==2.12.2->-r requirements/_test.in (line 46))
#   typing-extensions>=3.10.0 (from bokeh==2.4.2->-r requirements/_test.in (line 38))
aioitertools<=0.8.0

# issues with pinned pyyaml version in 0.3.2>=, 0.5.x should be installable
openapi-spec-validator<=0.3.1

# constraint since https://github.com/MagicStack/uvloop/releases/tag/v0.15.0: drops support for 3.5/3.6  Feb.2021
uvloop<0.15.0 ; python_version < '3.7'

# All backports libraries add environ markers
# NOTE: If >second dependency, this will annotate a marker in the compiled requirements file
#
async-exit-stack ; python_version < '3.7'
async-generator ; python_version < '3.7'
contextvars ; python_version < '3.7'
dataclasses ; python_version < '3.7'
importlib-metadata ; python_version < '3.8'
importlib-resources ; python_version < '3.9'
typing-extensions ; python_version < '3.7'
zipp ; python_version < '3.7'
