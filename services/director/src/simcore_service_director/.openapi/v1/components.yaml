components:
  schemas:
    ServiceDescription:    
      type: object
      required:
        - key
        - details
      properties:
        key:
          description: The key of the service
          type: string
          format: url
          example: simcore/services/dynamic/3d-viewer
        details:
          description: The details of the service
          type: array
          items:
            $ref: '#/components/schemas/ServiceDetails'
    ServiceDetails:
      type: object
      required:
        - authors
        - contact
        - description
        - inputs
        - outputs
        - key
        - name
        - tag
      properties:
        authors:
          type: array
          description: The authors of this service
          items:
            $ref: '#/components/schemas/AuthorDetails'
        contact:
          type: string
          format: email
          description: The email address to go for questions on the service
          example: servicecontact@email.com
        description:
          type: string
          description: The human readable description of the service
          example: This service provides a 3d-viewer
        inputs:
          description: The inputs of the service
          type: array
          items:
            $ref: '#/components/schemas/PortDetails'
        outputs:
          description: The outputs of the service
          type: array
          items:
            $ref: '#/components/schemas/PortDetails'
        key:
          description: The location of the service
          type: string
          format: url
          example: simcore/services/dynamic/3d-viewer
        name:
          description: The name of the service
          type: string
          example: 3d-viewer
        tag:
          description: The tag/version of the service
          type: string
          example: 1.0.0
        viewer:
          $ref: '#/components/schemas/Viewer'      
        
    AuthorDetails:
      type: object
      required: 
        - name
        - email
      properties:
        name:
          description: The name of the author
          type: string
          example: Lee Van Cleef
        email:
          description: The email address of the author
          type: string
          format: email
          example: leevancleef@thebad.com
      
    PortDetails:
      type: object
      required: 
        - key
        - label
        - desc
        - type
        - value
      properties:
        key:
          description: The unique key of the port
          type: string
          example: in1
        label:
          description: The label of the port
          type: string
          example: in1 is representing some important value here
        desc:
          description: The human readable description of what the port is for
          type: string
          example: this is the description of in1
        type:        
          type: string
          enum: 
            - integer
            - number
            - bool
            - string
            - file-url
            - folder-url
          description: |
            The type of the port:
              * integer - An signed integer
              * number - A floating point number
              * bool - A boolean, True or False
              * string - A chain of characters
              * file-url - A URL pointing to a file
              * folder-url - A URL pointing to a folder
          example: file-url

        value:
          description: The value of the port. May be null if not yet defined.
          type: string
          example: my value is great
          nullable: true
      
    Viewer:
      type: object
      required: 
        - ip
        - port
      properties:
        ip:
          description: The IP address where the viewer is served
          type: string
          format: ip
          example: osparc.itis.swiss
          nullable: true
        port:
          description: The port where the viewer is served
          type: integer
          minimum: 1
          example: 2213
          nullable: true