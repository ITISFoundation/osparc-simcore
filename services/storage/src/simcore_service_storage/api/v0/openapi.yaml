openapi: 3.1.0
info:
  title: simcore-service-storage API
  description: API definition for simcore-service-storage service
  contact:
    name: IT'IS Foundation
    email: support@simcore.io
  license:
    name: MIT
    url: https://github.com/ITISFoundation/osparc-simcore/blob/master/LICENSE
  version: 0.3.0
servers:
- url: /
  description: 'Default server: requests directed to serving url'
- url: http://{host}:{port}/
  description: 'Development server: can configure any base url'
  variables:
    host:
      default: 127.0.0.1
    port:
      default: '8000'
paths:
  /v0/locations/{location_id}/datasets:
    get:
      tags:
      - datasets
      summary: Get datasets metadata
      description: returns all the top level datasets a user has access to
      operationId: get_datasets_metadata
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_list_simcore_service_storage.models.DatasetMetaData__'
  /v0/locations/{location_id}/datasets/{dataset_id}/metadata:
    get:
      tags:
      - datasets
      summary: Get Files Metadata
      description: returns all the file meta data inside dataset with dataset_id
      operationId: get_files_metadata_dataset
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          type: string
          title: Dataset Id
        name: dataset_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      - description: Automatic directory expansion. This will be replaced by pagination
          the future
        required: false
        schema:
          type: boolean
          title: Expand Dirs
          description: Automatic directory expansion. This will be replaced by pagination
            the future
          default: true
        name: expand_dirs
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_list_models_library.api_schemas_storage.FileMetaDataGet__'
  /v0/locations:
    get:
      tags:
      - locations
      summary: Get available storage locations
      description: Returns the list of available storage locations
      operationId: get_storage_locations
      parameters:
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/DatasetMetaData'
                type: array
                title: Response Get Storage Locations
  /v0/locations/{location_id}:sync:
    post:
      tags:
      - locations
      summary: Manually triggers the synchronisation of the file meta data table in
        the database
      description: Returns an object containing added, changed and removed paths
      operationId: synchronise_meta_data_table
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: false
        schema:
          type: boolean
          title: Dry Run
          default: false
        name: dry_run
        in: query
      - required: false
        schema:
          type: boolean
          title: Fire And Forget
          default: false
        name: fire_and_forget
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_TableSynchronisation_'
  /v0/locations/{location_id}/files/metadata:
    get:
      tags:
      - files
      summary: Get datasets metadata
      description: returns all the file meta data a user has access to (uuid_filter
        may be used)
      operationId: get_files_metadata
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: false
        schema:
          type: string
          title: Uuid Filter
          default: ''
        name: uuid_filter
        in: query
      - description: Automatic directory expansion. This will be replaced by pagination
          the future
        required: false
        schema:
          type: boolean
          title: Expand Dirs
          description: Automatic directory expansion. This will be replaced by pagination
            the future
          default: true
        name: expand_dirs
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_list_simcore_service_storage.models.DatasetMetaData__'
  /v0/locations/{location_id}/files/{file_id}/metadata:
    get:
      tags:
      - files
      summary: Get File Metadata
      description: returns the file meta data of file_id if user_id has the rights
        to
      operationId: get_file_metadata
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - $ref: '#/components/schemas/FileMetaData'
                - $ref: '#/components/schemas/Envelope_FileMetaDataGet_'
                title: Response Get File Metadata
  /v0/locations/{location_id}/files/{file_id}:
    get:
      tags:
      - files
      summary: Returns download link for requested file
      description: creates a download file link if user has the rights to
      operationId: download_file
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      - required: false
        schema:
          allOf:
          - $ref: '#/components/schemas/LinkType'
          default: PRESIGNED
        name: link_type
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_PresignedLink_'
    put:
      tags:
      - files
      summary: Returns upload link
      description: creates one or more upload file links if user has the rights to,
        expects the client to complete/abort upload
      operationId: upload_file
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          title: File Size
        name: file_size
        in: query
      - required: false
        schema:
          allOf:
          - $ref: '#/components/schemas/LinkType'
          default: PRESIGNED
        name: link_type
        in: query
      - required: false
        schema:
          type: boolean
          title: Is Directory
          default: false
        name: is_directory
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - $ref: '#/components/schemas/Envelope_FileUploadSchema_'
                - $ref: '#/components/schemas/Envelope_AnyUrl_'
                title: Response Upload File
    delete:
      tags:
      - files
      summary: Deletes File
      description: deletes file if user has the rights to
      operationId: delete_file
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '204':
          description: Successful Response
  /v0/locations/{location_id}/files/{file_id}:abort:
    post:
      tags:
      - files
      summary: Abort Upload File
      description: 'aborts an upload if user has the rights to, and reverts

        to the latest version if available, else will delete the file'
      operationId: abort_upload_file
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '204':
          description: Successful Response
  /v0/locations/{location_id}/files/{file_id}:complete:
    post:
      tags:
      - files
      summary: Complete Upload File
      description: completes an upload if the user has the rights to
      operationId: complete_upload_file
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Envelope_FileUploadCompletionBody_'
        required: true
      responses:
        '202':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_FileUploadCompleteResponse_'
  /v0/locations/{location_id}/files/{file_id}:complete/futures/{future_id}:
    post:
      tags:
      - files
      summary: Check for upload completion
      description: Returns state of upload completion
      operationId: is_completed_upload_file
      parameters:
      - required: true
        schema:
          type: integer
          title: Location Id
        name: location_id
        in: path
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: string
          title: Future Id
        name: future_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_FileUploadCompleteFutureResponse_'
  /v0/:
    get:
      tags:
      - health
      summary: health check endpoint
      description: Current service health
      operationId: health_check
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_HealthCheck_'
  /v0/status:
    get:
      tags:
      - health
      summary: returns the status of the services inside
      description: returns the status of all the external dependencies
      operationId: get_status
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_AppStatusCheck_'
  /v0/files/{file_id}:soft-copy:
    post:
      tags:
      - files
      summary: copy file as soft link
      description: creates and returns a soft link
      operationId: copy_as_soft_link
      parameters:
      - required: true
        schema:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
        name: file_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SoftCopyBody'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileMetaDataGet'
  /v0/simcore-s3:access:
    post:
      tags:
      - simcore-s3
      summary: gets or creates the a temporary access
      description: returns a set of S3 credentials
      operationId: get_or_create_temporary_s3_access
      parameters:
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_S3Settings_'
  /v0/simcore-s3/folders:
    post:
      tags:
      - simcore-s3
      summary: copies folders from project
      description: copies folders from project
      operationId: copy_folders_from_project
      parameters:
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FoldersBody'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_TaskGet_'
  /v0/simcore-s3/folders/{folder_id}:
    delete:
      tags:
      - simcore-s3
      summary: delete folders from project
      description: removes folders from a project
      operationId: delete_folders_of_project
      parameters:
      - required: true
        schema:
          type: string
          title: Folder Id
        name: folder_id
        in: path
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      - required: false
        schema:
          type: string
          format: uuid
          title: Node Id
        name: node_id
        in: query
      responses:
        '204':
          description: Successful Response
  /v0/simcore-s3/files/metadata:search:
    post:
      tags:
      - simcore-s3
      summary: search for files starting with
      description: search for files starting with `startswith` and/or matching a sha256_checksum
        in the file_meta_data table
      operationId: search_files
      parameters:
      - required: true
        schema:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
        name: user_id
        in: query
      - required: false
        schema:
          type: string
          title: Startswith
          default: ''
        name: startswith
        in: query
      - required: false
        schema:
          type: string
          pattern: ^[a-fA-F0-9]{64}$
          title: Sha256 Checksum
        name: sha256_checksum
        in: query
      - required: false
        schema:
          type: string
          enum:
          - read
          - write
          title: Access Right
          default: read
        name: access_right
        in: query
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_FileMetaDataGet_'
  /v0/futures:
    get:
      tags:
      - tasks
      summary: list current long running tasks
      description: list current long running tasks
      operationId: list_tasks
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_TaskGet_'
  /v0/futures/{task_id}:
    get:
      tags:
      - tasks
      summary: gets the status of the task
      description: gets the status of the task
      operationId: get_task_status
      parameters:
      - required: true
        schema:
          type: string
          title: Task Id
        name: task_id
        in: path
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope_TaskStatus_'
    delete:
      tags:
      - tasks
      summary: cancels and removes the task
      description: cancels and removes the task
      operationId: cancel_and_delete_task
      parameters:
      - required: true
        schema:
          type: string
          title: Task Id
        name: task_id
        in: path
      responses:
        '204':
          description: Successful Response
  /v0/futures/{task_id}/result:
    get:
      tags:
      - tasks
      summary: get result of the task
      description: get result of the task
      operationId: get_task_result
      parameters:
      - required: true
        schema:
          type: string
          title: Task Id
        name: task_id
        in: path
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                title: Response Get Task Result
components:
  schemas:
    AppStatusCheck:
      properties:
        app_name:
          type: string
          title: App Name
          description: Application name
        version:
          type: string
          title: Version
          description: Application's version
        services:
          type: object
          title: Services
          description: Other backend services connected from this service
          default: {}
        sessions:
          type: object
          title: Sessions
          description: Client sessions info. If single session per app, then is denoted
            as main
          default: {}
        url:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: Url
          description: Link to current resource
        diagnostics_url:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: Diagnostics Url
          description: Link to diagnostics report sub-resource. This MIGHT take some
            time to compute
      type: object
      required:
      - app_name
      - version
      title: AppStatusCheck
    DatasetMetaData:
      properties:
        dataset_id:
          anyOf:
          - type: string
            format: uuid
          - type: string
            pattern: ^N:dataset:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: Dataset Id
        display_name:
          type: string
          title: Display Name
      additionalProperties: false
      type: object
      required:
      - dataset_id
      - display_name
      title: DatasetMetaData
    Envelope_AnyUrl_:
      properties:
        data:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: Data
        error:
          title: Error
      type: object
      title: Envelope[AnyUrl]
    Envelope_AppStatusCheck_:
      properties:
        data:
          $ref: '#/components/schemas/AppStatusCheck'
        error:
          title: Error
      type: object
      title: Envelope[AppStatusCheck]
    Envelope_FileMetaDataGet_:
      properties:
        data:
          $ref: '#/components/schemas/FileMetaDataGet'
        error:
          title: Error
      type: object
      title: Envelope[FileMetaDataGet]
    Envelope_FileUploadCompleteFutureResponse_:
      properties:
        data:
          $ref: '#/components/schemas/FileUploadCompleteFutureResponse'
        error:
          title: Error
      type: object
      title: Envelope[FileUploadCompleteFutureResponse]
    Envelope_FileUploadCompleteResponse_:
      properties:
        data:
          $ref: '#/components/schemas/FileUploadCompleteResponse'
        error:
          title: Error
      type: object
      title: Envelope[FileUploadCompleteResponse]
    Envelope_FileUploadCompletionBody_:
      properties:
        data:
          $ref: '#/components/schemas/FileUploadCompletionBody'
        error:
          title: Error
      type: object
      title: Envelope[FileUploadCompletionBody]
    Envelope_FileUploadSchema_:
      properties:
        data:
          $ref: '#/components/schemas/FileUploadSchema'
        error:
          title: Error
      type: object
      title: Envelope[FileUploadSchema]
    Envelope_HealthCheck_:
      properties:
        data:
          $ref: '#/components/schemas/HealthCheck'
        error:
          title: Error
      type: object
      title: Envelope[HealthCheck]
    Envelope_PresignedLink_:
      properties:
        data:
          $ref: '#/components/schemas/PresignedLink'
        error:
          title: Error
      type: object
      title: Envelope[PresignedLink]
    Envelope_S3Settings_:
      properties:
        data:
          $ref: '#/components/schemas/S3Settings'
        error:
          title: Error
      type: object
      title: Envelope[S3Settings]
    Envelope_TableSynchronisation_:
      properties:
        data:
          $ref: '#/components/schemas/TableSynchronisation'
        error:
          title: Error
      type: object
      title: Envelope[TableSynchronisation]
    Envelope_TaskGet_:
      properties:
        data:
          $ref: '#/components/schemas/TaskGet'
        error:
          title: Error
      type: object
      title: Envelope[TaskGet]
    Envelope_TaskStatus_:
      properties:
        data:
          $ref: '#/components/schemas/TaskStatus'
        error:
          title: Error
      type: object
      title: Envelope[TaskStatus]
    Envelope_list_models_library.api_schemas_storage.FileMetaDataGet__:
      properties:
        data:
          items:
            $ref: '#/components/schemas/FileMetaDataGet'
          type: array
          title: Data
        error:
          title: Error
      type: object
      title: Envelope[list[models_library.api_schemas_storage.FileMetaDataGet]]
    Envelope_list_simcore_service_storage.models.DatasetMetaData__:
      properties:
        data:
          items:
            $ref: '#/components/schemas/DatasetMetaData'
          type: array
          title: Data
        error:
          title: Error
      type: object
      title: Envelope[list[simcore_service_storage.models.DatasetMetaData]]
    FileMetaData:
      properties:
        file_uuid:
          type: string
          title: File Uuid
          description: NOT a unique ID, like (api|uuid)/uuid/file_name or DATCORE
            folder structure
        location_id:
          type: integer
          title: Location Id
          description: Storage location
        project_name:
          type: string
          title: Project Name
          description: optional project name, used by frontend to display path
        node_name:
          type: string
          title: Node Name
          description: optional node name, used by frontend to display path
        file_name:
          type: string
          title: File Name
          description: Display name for a file
        file_id:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
          description: THIS IS the unique ID for the file. either (api|project_id)/node_id/file_name.ext
            for S3 and N:package:UUID for datcore
        created_at:
          type: string
          format: date-time
          title: Created At
        last_modified:
          type: string
          format: date-time
          title: Last Modified
        file_size:
          anyOf:
          - type: integer
          - type: integer
          title: File Size
          description: File size in bytes (-1 means invalid)
          default: -1
        entity_tag:
          type: string
          title: Entity Tag
          description: Entity tag (or ETag), represents a specific version of the
            file, None if invalid upload or datcore
        is_soft_link:
          type: boolean
          title: Is Soft Link
          description: If true, this file is a soft link.i.e. is another entry with
            the same object_name
          default: false
        is_directory:
          type: boolean
          title: Is Directory
          description: if True this is a directory
          default: false
        sha256_checksum:
          type: string
          pattern: ^[a-fA-F0-9]{64}$
          title: Sha256 Checksum
        upload_id:
          type: string
          title: Upload Id
        upload_expires_at:
          type: string
          format: date-time
          title: Upload Expires At
        location:
          type: string
          title: Location
        bucket_name:
          type: string
          title: Bucket Name
        object_name:
          type: string
          title: Object Name
        project_id:
          type: string
          format: uuid
          title: Project Id
        node_id:
          type: string
          format: uuid
          title: Node Id
        user_id:
          type: integer
          exclusiveMinimum: true
          title: User Id
          minimum: 0
      additionalProperties: false
      type: object
      required:
      - file_uuid
      - location_id
      - file_name
      - file_id
      - created_at
      - last_modified
      - location
      - bucket_name
      - object_name
      title: FileMetaData
    FileMetaDataGet:
      properties:
        file_uuid:
          type: string
          title: File Uuid
          description: NOT a unique ID, like (api|uuid)/uuid/file_name or DATCORE
            folder structure
        location_id:
          type: integer
          title: Location Id
          description: Storage location
        project_name:
          type: string
          title: Project Name
          description: optional project name, used by frontend to display path
        node_name:
          type: string
          title: Node Name
          description: optional node name, used by frontend to display path
        file_name:
          type: string
          title: File Name
          description: Display name for a file
        file_id:
          anyOf:
          - type: string
            pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          - type: string
            pattern: ^N:package:[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}$
          title: File Id
          description: THIS IS the unique ID for the file. either (api|project_id)/node_id/file_name.ext
            for S3 and N:package:UUID for datcore
        created_at:
          type: string
          format: date-time
          title: Created At
        last_modified:
          type: string
          format: date-time
          title: Last Modified
        file_size:
          anyOf:
          - type: integer
          - type: integer
          title: File Size
          description: File size in bytes (-1 means invalid)
          default: -1
        entity_tag:
          type: string
          title: Entity Tag
          description: Entity tag (or ETag), represents a specific version of the
            file, None if invalid upload or datcore
        is_soft_link:
          type: boolean
          title: Is Soft Link
          description: If true, this file is a soft link.i.e. is another entry with
            the same object_name
          default: false
        is_directory:
          type: boolean
          title: Is Directory
          description: if True this is a directory
          default: false
        sha256_checksum:
          type: string
          pattern: ^[a-fA-F0-9]{64}$
          title: Sha256 Checksum
          description: 'SHA256 message digest of the file content. Main purpose: cheap
            lookup.'
      additionalProperties: false
      type: object
      required:
      - file_uuid
      - location_id
      - file_name
      - file_id
      - created_at
      - last_modified
      title: FileMetaDataGet
    FileUploadCompleteFutureResponse:
      properties:
        state:
          $ref: '#/components/schemas/FileUploadCompleteState'
        e_tag:
          type: string
          title: E Tag
      type: object
      required:
      - state
      title: FileUploadCompleteFutureResponse
    FileUploadCompleteLinks:
      properties:
        state:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: State
      type: object
      required:
      - state
      title: FileUploadCompleteLinks
    FileUploadCompleteResponse:
      properties:
        links:
          $ref: '#/components/schemas/FileUploadCompleteLinks'
      type: object
      required:
      - links
      title: FileUploadCompleteResponse
    FileUploadCompleteState:
      enum:
      - ok
      - nok
      title: FileUploadCompleteState
      description: An enumeration.
    FileUploadCompletionBody:
      properties:
        parts:
          items:
            $ref: '#/components/schemas/UploadedPart'
          type: array
          title: Parts
      type: object
      required:
      - parts
      title: FileUploadCompletionBody
    FileUploadLinks:
      properties:
        abort_upload:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: Abort Upload
        complete_upload:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: Complete Upload
      type: object
      required:
      - abort_upload
      - complete_upload
      title: FileUploadLinks
    FileUploadSchema:
      properties:
        chunk_size:
          type: integer
          title: Chunk Size
        urls:
          items:
            type: string
            maxLength: 65536
            minLength: 1
            format: uri
          type: array
          title: Urls
        links:
          $ref: '#/components/schemas/FileUploadLinks'
      type: object
      required:
      - chunk_size
      - urls
      - links
      title: FileUploadSchema
    FoldersBody:
      properties:
        source:
          type: object
          title: Source
        destination:
          type: object
          title: Destination
        nodes_map:
          additionalProperties:
            type: string
            format: uuid
          type: object
          title: Nodes Map
      type: object
      title: FoldersBody
    HealthCheck:
      properties:
        name:
          type: string
          title: Name
        status:
          type: string
          title: Status
        api_version:
          type: string
          title: Api Version
        version:
          type: string
          title: Version
      type: object
      title: HealthCheck
    LinkType:
      type: string
      enum:
      - PRESIGNED
      - S3
      title: LinkType
      description: An enumeration.
    PresignedLink:
      properties:
        link:
          type: string
          maxLength: 65536
          minLength: 1
          format: uri
          title: Link
      type: object
      required:
      - link
      title: PresignedLink
    S3Settings:
      properties:
        S3_SECURE:
          type: boolean
          title: S3 Secure
          default: false
        S3_ENDPOINT:
          type: string
          title: S3 Endpoint
        S3_ACCESS_KEY:
          type: string
          title: S3 Access Key
        S3_SECRET_KEY:
          type: string
          title: S3 Secret Key
        S3_ACCESS_TOKEN:
          type: string
          title: S3 Access Token
        S3_BUCKET_NAME:
          type: string
          title: S3 Bucket Name
        S3_REGION:
          type: string
          title: S3 Region
          default: us-east-1
      additionalProperties: false
      type: object
      required:
      - S3_ENDPOINT
      - S3_ACCESS_KEY
      - S3_SECRET_KEY
      - S3_BUCKET_NAME
      title: S3Settings
      description: "- Customized configuration for all settings\n- If a field is a\
        \ BaseCustomSettings subclass, it allows creating a default from env vars\
        \ setting the Field\n  option 'auto_default_from_env=True'.\n\nSEE tests for\
        \ details."
    SoftCopyBody:
      properties:
        link_id:
          type: string
          pattern: ^(api|([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}))\/([0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12})\/(.+)$
          title: Link Id
      type: object
      required:
      - link_id
      title: SoftCopyBody
    TableSynchronisation:
      properties:
        dry_run:
          type: boolean
          title: Dry Run
        fire_and_forget:
          type: boolean
          title: Fire And Forget
        removed:
          items:
            type: string
          type: array
          title: Removed
      type: object
      required:
      - removed
      title: TableSynchronisation
    TaskGet:
      properties:
        task_id:
          type: string
          title: Task Id
        task_name:
          type: string
          title: Task Name
        status_href:
          type: string
          title: Status Href
        result_href:
          type: string
          title: Result Href
        abort_href:
          type: string
          title: Abort Href
      type: object
      required:
      - task_id
      - task_name
      - status_href
      - result_href
      - abort_href
      title: TaskGet
    TaskProgress:
      properties:
        message:
          type: string
          title: Message
          default: ''
        percent:
          type: number
          maximum: 1.0
          minimum: 0.0
          title: Percent
          default: 0.0
      type: object
      title: TaskProgress
      description: 'Helps the user to keep track of the progress. Progress is expected
        to be

        defined as a float bound between 0.0 and 1.0'
    TaskStatus:
      properties:
        task_progress:
          $ref: '#/components/schemas/TaskProgress'
        done:
          type: boolean
          title: Done
        started:
          type: string
          format: date-time
          title: Started
      type: object
      required:
      - task_progress
      - done
      - started
      title: TaskStatus
    UploadedPart:
      properties:
        number:
          type: integer
          exclusiveMinimum: true
          title: Number
          minimum: 0
        e_tag:
          type: string
          title: E Tag
      type: object
      required:
      - number
      - e_tag
      title: UploadedPart
tags:
- name: datasets
- name: files
- name: health
- name: locations
- name: tasks
- name: simcore-s3
