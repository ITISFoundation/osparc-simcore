version: '3.4'
services:
  cc-0d:
    image: masu.speag.com/simcore/services/dynamic/cc-0d-viewer:${SERVICES_VERSION}
    build:
      context: .
      dockerfile: cc/Dockerfile
      target: production      
      args: 
        BASE_IMAGE: ${BASE_IMAGE}
        NOTEBOOK_NAME: notebook/cc_single_cell.ipynb
        NOTEBOOK_FOLDER_NAME: cc-single-cell 
      labels: 
        io.simcore.key: '{"key": "simcore/services/dynamic/cc-0d-viewer"}'        
        io.simcore.version: '{"version": "${SERVICES_VERSION}"}'
        io.simcore.type: '{"type": "dynamic"}'
        io.simcore.name: '{"name": "cc-0d-viewer"}'
        io.simcore.description: '{"description": "Graph viewer for data generated by cc-0d solver"}'
        io.simcore.authors: '{"authors": [{"name": "sanderegg", "email": "anderegg@itis.swiss", "affiliation": "ITIS Foundation"}]}'
        io.simcore.contact: '{"contact": "anderegg@itis.swiss"}'
        io.simcore.inputs: '{"inputs": {"vm_1Hz":{"label": "vm 1Hz", "displayOrder":0, "description": "Computed values from the solver", "type": "data:*/*"}, "all_results_1Hz":{"label": "all results 1Hz", "displayOrder":1, "description": "Computed values from the solver", "type": "data:*/*"}}}'
        io.simcore.outputs: '{"outputs": {"out_1":{"label": "output 1", "displayOrder":0, "description": "Output value 1", "type": "data:*/*"}, "out_2":{"label": "out 2", "displayOrder":1, "description": "Output value 2", "type": "data:*/*"}}}'
        simcore.service.settings: '[{"name": "ports", "type": "int", "value": 8888}, {"name": "constraints", "type": "string", "value": ["node.platform.os == linux"]}]'
        org.label-schema.schema-version: "1.0"
        org.label-schema.build-date: "${BUILD_DATE}"
        org.label-schema.vcs-url: "https://github.com/ITISFoundation/osparc-simcore"
        org.label-schema.vcs-ref: "${VCS_REF}"
    ports:
      - '1234:8888'
  #--------------------------------------------------------------------
  cc-1d:
    image: masu.speag.com/simcore/services/dynamic/cc-1d-viewer:${SERVICES_VERSION}
    build:
      context: .
      dockerfile: cc/Dockerfile
      target: production
      args: 
        BASE_IMAGE: ${BASE_IMAGE}
        NOTEBOOK_NAME: notebook/cc_oned.ipynb
        NOTEBOOK_FOLDER_NAME: cc-oned        
      labels:
        io.simcore.key: '{"key": "simcore/services/dynamic/cc-1d-viewer"}'
        io.simcore.version: '{"version": "${SERVICES_VERSION}"}'
        io.simcore.type: '{"type": "dynamic"}'
        io.simcore.name: '{"name": "cc-1d-viewer"}'
        io.simcore.description: '{"description": "Graph viewer for data generated by cc-1d solver"}'
        io.simcore.authors: '{"authors": [{"name": "Sylvain Anderegg", "email": "anderegg@itis.ethz.ch", "affiliation": "ITIS Foundation"}]}'
        io.simcore.contact: '{"contact": "anderegg@itis.ethz.ch"}'        
        io.simcore.inputs: '{"inputs": {"ECGs":{"label": "ECGs", "displayOrder":0, "description": "Computed ECGs out of a solver", "type": "data:*/*"}, "y_1D":{"label": "action potentials", "displayOrder":1, "description": "Action potentials out of solver", "type": "data:*/*"}}}'
        io.simcore.outputs: '{"outputs": {"out_1":{"label": "out 1", "displayOrder":0, "description": "Output value 1", "type": "data:*/*"}, "out_2":{"label": "out 2", "displayOrder":1, "description": "Output value 2", "type": "data:*/*"}}}'
        simcore.service.settings: '[{"name": "ports", "type": "int", "value": 8888}, {"name": "constraints", "type": "string", "value": ["node.platform.os == linux"]}]'
        org.label-schema.schema-version: "1.0"
        org.label-schema.build-date: "${BUILD_DATE}"
        org.label-schema.vcs-url: "https://github.com/ITISFoundation/osparc-simcore"
        org.label-schema.vcs-ref: "${VCS_REF}"
    ports:
      - '1235:8888'
  #--------------------------------------------------------------------
  cc-2d:
    image: masu.speag.com/simcore/services/dynamic/cc-2d-viewer:${SERVICES_VERSION}
    build:
      context: .
      dockerfile: cc/Dockerfile
      target: production
      args: 
        BASE_IMAGE: ${BASE_IMAGE}
        NOTEBOOK_NAME: notebook/cc_2d.ipynb
        NOTEBOOK_FOLDER_NAME: cc-twod   
      labels:
        io.simcore.key: '{"key": "simcore/services/dynamic/cc-2d-viewer"}'
        io.simcore.version: '{"version": "${SERVICES_VERSION}"}'
        io.simcore.type: '{"type": "dynamic"}'
        io.simcore.name: '{"name": "cc-2d-viewer"}'
        io.simcore.description: '{"description": "Graph viewer for data generated by cc-2d solver"}'
        io.simcore.authors: '{"authors": [{"name": "Sylvain Anderegg", "email": "anderegg@itis.ethz.ch", "affiliation": "ITIS Foundation"}]}'
        io.simcore.contact: '{"contact": "anderegg@itis.ethz.ch"}'        
        io.simcore.inputs: '{"inputs": {"ap":{"label": "ap", "displayOrder":0, "description": "these are computed data out of a 2d solver", "type": "data:*/*"}}}'
        io.simcore.outputs: '{"outputs": {"out_1":{"label": "out 1", "displayOrder":0, "description": "Output value 1", "type": "data:*/*"}, "out_2":{"label": "out 2", "displayOrder":1, "description": "Output value 2", "type": "data:*/*"}}}'
        simcore.service.settings: '[{"name": "ports", "type": "int", "value": 8888}, {"name": "constraints", "type": "string", "value": ["node.platform.os == linux"]}]'
        org.label-schema.schema-version: "1.0"
        org.label-schema.build-date: "${BUILD_DATE}"
        org.label-schema.vcs-url: "https://github.com/ITISFoundation/osparc-simcore"
        org.label-schema.vcs-ref: "${VCS_REF}"
    ports:
      - '1236:8888'
  #--------------------------------------------------------------------
  kember:
    image: masu.speag.com/simcore/services/dynamic/kember-viewer:${SERVICES_VERSION}
    build:
      context: .
      dockerfile: kember/Dockerfile
      target: production      
      args:
        BASE_IMAGE: ${BASE_IMAGE}
        NOTEBOOK_NAME: notebook/kember.ipynb
      labels:
        io.simcore.key: '{"key": "simcore/services/dynamic/kember-viewer"}'
        io.simcore.version: '{"version": "${SERVICES_VERSION}"}'
        io.simcore.type: '{"type": "dynamic"}'
        io.simcore.name: '{"name": "kember-viewer"}'
        io.simcore.description: '{"description": "Graph viewer for data generated by kember solver"}'
        io.simcore.authors: '{"authors": [{"name": "Sylvain Anderegg", "email": "anderegg@itis.ethz.ch", "affiliation": "ITIS Foundation"}]}'
        io.simcore.contact: '{"contact": "anderegg@itis.ethz.ch"}'        
        io.simcore.inputs: '{"inputs": {"outputController":{"label": "Input", "displayOrder":0, "description": "Input for postprocessing", "type": "data:*/*"}}}'
        io.simcore.outputs: '{"outputs": {"out_1":{"label": "out 1", "displayOrder":0, "description": "Output value 1", "type": "data:*/*"}, "out_2":{"label": "out 2", "displayOrder":1, "description": "Output value 2", "type": "data:*/*"}}}'
        simcore.service.settings: '[{"name": "ports", "type": "int", "value": 8888}, {"name": "constraints", "type": "string", "value": ["node.platform.os == linux"]}]'
        org.label-schema.schema-version: "1.0"
        org.label-schema.build-date: "${BUILD_DATE}"
        org.label-schema.vcs-url: "https://github.com/ITISFoundation/osparc-simcore"
        org.label-schema.vcs-ref: "${VCS_REF}"
    ports:
      - '1237:8888'